<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" href="css/jquery.mobile-1.3.1.min.css" />
<link rel="stylesheet" href="css/style.css" />
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.mobile-1.3.1.min.js"></script>
<script src="cordova-2.6.0.js"></script>

</head>
<body>

	<div id="programListPage" data-role="page" data-theme="c" data-header-theme="c" data-content-theme="c">

		<div data-role="header" >
			<div data-role="navbar">
				<ul>
					<li style="width:20%;">
						<a style="background: transparent;" href="index.html" data-iconpos="none" ><img data-theme="c" alt="" src="img/icon_Dragon_Head_32.png"></a>
					</li>
					<li style="width:80%; text-align: center;"><h3>Program</h3></li>
				</ul>
			</div>
			<!-- /navbar -->
		</div>
		<!-- /header -->

		<div data-role="content">
			<a data-role="button" data-icon="arrow-l" href="#" data-rel="back" data-inline="true">Tillbaka</a>
			<h1>Program sidan2</h1>
			
			<div data-role="collapsible" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
				<h2>Onsdag, Augusti 7, 2013</h2>
				<ul data-role="listview" data-theme="d" data-divider-theme="d" data-inset="true">
					
					<li><a href="index.html">
							<h3>Lilla drakloppet</h3>
							<p>
								<strong>bla bla bla adfa asdf sdfl asdfa sdfsd fsadf</strong>
							</p>
							<p></p>
							<p class="ui-li-aside"><strong>17:30</strong></p>
					</a></li>
					<li><a href="index.html">
							<h3>Röda draken (Start på Norra Berget!)</h3>
							<p>
								<strong>bla bla bla adfa asdf sdfl asdfa sdfsd fsadf</strong>
							</p>
							<p></p>
							<p class="ui-li-aside"><strong>18:30</strong></p>
					</a></li>
					
				</ul>
			</div>


			<div data-role="collapsible" data-collapsed-icon="arrow-d" data-expanded-icon="arrow-u">
				<h2>Torsdag, Augusti 8, 2013</h2>
				<ul data-role="listview" data-theme="d" data-divider-theme="d"  data-inset="true">
					
					<li><a href="index.html">
							<h2>Festivalområdet öppnar.</h2>
							<p>
								<strong>Lunchservering i våra mat och öltält. Axels nöjesfält öppnar sina attraktioner alla åksugna.</strong>
							</p>
							<p></p>
							<p class="ui-li-aside"><strong>11:00</strong></p>
					</a></li>
				</ul>
			</div>

			<ul id="programList" data-role="listview" data-filter="false"></ul>

		</div>
		<!-- /content -->

		<!-- 
		<div data-role="footer">
			<h4>Page Footer</h4>
		</div>
		 -->
		<!-- /footer -->
		
		<script>
		
			var serviceURL = "http://tagquiz.mathiasberg.se/df/";
			var proglist;
			var mainloaded = true;

			//Start loading spinner. sets to hide when ajax is finished
			//Triggered on the "toPage" after the transition animation has completed.
			//see http://jquerymobile.com/demos/1.2.1/docs/api/events.html

			$('#programListPage').on('pageshow', function(event) { //Workaround to show page loading on initial page load
				console.log('pageshow');
				if (!mainloaded) {
					$.mobile.loading('show');
				}

			});

			
			//Triggered on the page being initialized, after initialization occurs. Dokument is ready
			$('#programListPage').bind('pageinit', function(event) {
				console.log('pageinit');
				//ajaxCallPrograms();
				$.mobile.loading('hide');
			});

			//Ajax call. populate program list
			function ajaxCallPrograms() {
				console.log('ajaxCallPrograms');
				$.getJSON(serviceURL + 'testjq.php', function(data) {
					proglist = data;
					mainloaded = true;
					$.mobile.loading('hide');
					//populerar li element
					pushToList();
				});
			}

			//Populate the li list element
			function pushToList() {
				console.log('pushToList');
				$('#programList li').remove();
				$.each(proglist,
						function(index, program) {
							$('#programList').append(
									'<li><a href="programinfo.html?id='
											+ program.questionId + '">'
											+ '<h4>' + program.question
											+ '</h4>' + '</a></li>');
						});
				$('#programList').listview('refresh');

			}
		</script>
		
		
	</div>
	<!-- /page -->

</body>
</html>